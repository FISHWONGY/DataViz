```{r}
library(readr)
library(ggplot2)
library(delabj)
library(ggtext)
library(paletteer)
library(evoPalette)
library(ghibli)
library(patchwork)
library(tidyverse)
library(ggrepel)
```


```{r}
anime <- read_csv(file="https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-23/tidy_anime.csv")
```

```{r}
anime$year <- as.numeric(substr(anime$start_date, 1,4))
anime <- anime %>% 
            select(1:4, 6:10, 14, 18,20,21, 29)  %>%
            #mutate(year = as.numeric(year)) %>%
            mutate(decade = year - year %% 10)
```

```{r}
producer <- anime %>%
  group_by(producers) %>% 
               count(producers) %>%
               ungroup() %>%
 # mutate_at(c("producers"), as.factor) %>%
  drop_na(producers)%>%
  arrange(-n) 
```

```{r}
pro_yr <- anime %>%
  group_by(producers, decade) %>% 
  count(producers, decade) %>%
  ungroup() %>%
  #mutate_at(c("producers"), as.factor) %>%
  drop_na(producers, decade)%>%
  arrange(decade) %>%
  filter(producers %in% c("TV Tokyo", "Aniplex", "Bandai Visual", "NHK", "Fuji TV", "Sotsu", "Dentsu", "Square Enix",
                          "AT-X","Kadokawa Shoten", "TBS"))
```
